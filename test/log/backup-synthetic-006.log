run 006 - rmt 1, cmp 0, hardlink 1
==================================

full backup
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --manifest-save-threshold=3 --type=full --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = full
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common/pg_tblspc
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/global/pg_control to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-1], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/global/pg_control (8KB, 99%) checksum 56fe5780b8dca9705e0c22032a83828860a21235
DEBUG:     manifest saved
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/base/base1.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/base/base1.txt (4B, 99%) checksum a3b357a3e395e43fcfb19bb13f3c1b5179279593
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/PG_VERSION to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/PG_VERSION (3B, 100%) checksum e1f7a3a299f62225cba076fc6d3d6e677f303482
 INFO: total backup size: 8KB
 INFO: new backup label: [BACKUP-FULL-1]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-FULL-1]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-FULL-1], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-1] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-FULL-1]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
# cluster-specific settings
[db]
db-path=[TEST_PATH]/db/common

# backup settings
[global:backup]
backup-host=127.0.0.1
backup-user=backrest

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
# cluster-specific settings
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common
db-user=dsteele

# cluster-specific command options
[db:command]
cmd-psql-option=--port=[PORT-1]

# backup settings
[global:backup]
archive-copy=y
hardlink=y
start-fast=y

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-FULL-1]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-FULL-1]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="full"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"a3b357a3e395e43fcfb19bb13f3c1b5179279593","group":"[GROUP-1]","mode":"0600","size":4,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

info db
> ../bin/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --stanza=db info
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     Info->listStanza: stanza = db
stanza db
   status: ok
   oldest backup label: [BACKUP-FULL-1]
   oldest backup timestamp: [TIMESTAMP-STR]
   latest backup label: [BACKUP-FULL-1]
   latest backup timestamp: [TIMESTAMP-STR]
DEBUG:     safe exit called, terminating threads

info db
> ../bin/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --stanza=db info --output=json
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     Info->listStanza: stanza = db
[
   {
       "backup" : [
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 8199,
                   "repository" : {
                       "delta" : 9657,
                       "size" : 9657
                   },
                   "size" : 8199
               },
               "label" : "[BACKUP-FULL-1]",
               "prior" : null,
               "reference" : null,
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "full"
           }
       ],
       "db" : [
           {
               "id" : "1",
               "system-id" : 6156904820763115222,
               "version" : "9.3"
           }
       ],
       "name" : "db",
       "status" : {
           "code" : 0,
           "message" : "ok"
       }
   }
]
DEBUG:     safe exit called, terminating threads

full backup (resume)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --type=full --stanza=db backup --test --test-delay=0
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = full
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 WARN: backup [BACKUP-FULL-1] is missing from the repository - removed from backup.info
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common/pg_tblspc
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
DEBUG:     File->wait: db:absolute
 WARN: aborted backup of same type exists, will be cleaned to remove invalid files and resumed
 INFO: cleaning backup tmp path
DEBUG:     File->manifest: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp
DEBUG:     remove file [TEST_PATH]/backrest/temp/db.tmp/base/link-test
DEBUG:     remove file [TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     File->hash: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, compressed = false, hash_type = sha1
 INFO: checksum resumed file [TEST_PATH]/db/common/global/pg_control (8KB, 99%) checksum 56fe5780b8dca9705e0c22032a83828860a21235
DEBUG:     File->hash: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, compressed = false, hash_type = sha1
 INFO: checksum resumed file [TEST_PATH]/db/common/base/base1.txt (4B, 99%) checksum a3b357a3e395e43fcfb19bb13f3c1b5179279593
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/PG_VERSION to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/PG_VERSION (3B, 100%) checksum e1f7a3a299f62225cba076fc6d3d6e677f303482
 INFO: total backup size: 8KB
 INFO: new backup label: [BACKUP-FULL-2]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-FULL-2], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-FULL-2]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
# cluster-specific settings
[db]
db-path=[TEST_PATH]/db/common

# backup settings
[global:backup]
backup-host=127.0.0.1
backup-user=backrest

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
# cluster-specific settings
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common
db-user=dsteele

# cluster-specific command options
[db:command]
cmd-psql-option=--port=[PORT-1]

# backup settings
[global:backup]
archive-copy=y
hardlink=y
start-fast=y

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-FULL-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="full"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"a3b357a3e395e43fcfb19bb13f3c1b5179279593","group":"[GROUP-1]","mode":"0600","size":4,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

restore delta, backup '[BACKUP-FULL-2]' (add and delete files)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --delta --set=[BACKUP-FULL-2] --stanza=db restore
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
 INFO: Restoring backup set [BACKUP-FULL-2]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/backup.manifest to local db:absolute:[TEST_PATH]/db/common/backup.manifest, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [undef], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common/backup.manifest.backrest.tmp to absolute:[TEST_PATH]/db/common/backup.manifest, destination_path_create = false
DEBUG:     File->remove: db:absolute:[TEST_PATH]/db/common/backup.manifest
 INFO: checking/cleaning db path [TEST_PATH]/db/common
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
 INFO: removing link [TEST_PATH]/db/common/link-test - destination changed
 INFO: removing file/link [TEST_PATH]/db/common/deleteme/deleteme.txt
 INFO: removing path [TEST_PATH]/db/common/deleteme
 INFO: setting [TEST_PATH]/db/common/base mode to 0700
 INFO: 1 file(s) removed during cleanup
 INFO: 1 path(s) removed during cleanup
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/base
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/global
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/path-test
DEBUG:     File->path_create: db:absolute:[TEST_PATH]/db/common/path-test, mode 0700
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/pg_tblspc
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/link-test
DEBUG:     File->link_create: db:absolute:/test to db:absolute:[TEST_PATH]/db/common/link-test, hard = false, relative = false, destination_path_create = true
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common
DEBUG:     starting restore in main process
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/global/pg_control
DEBUG:     File->hash: db:absolute:[TEST_PATH]/db/common/global/pg_control, compressed = false, hash_type = sha1
 INFO: [TEST_PATH]/db/common/global/pg_control exists and matches backup (8KB, 99%) checksum 56fe5780b8dca9705e0c22032a83828860a21235
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/base/base1.txt
DEBUG:     File->hash: db:absolute:[TEST_PATH]/db/common/base/base1.txt, compressed = false, hash_type = sha1
 INFO: [TEST_PATH]/db/common/base/base1.txt exists and matches backup (4B, 99%) checksum a3b357a3e395e43fcfb19bb13f3c1b5179279593
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/PG_VERSION
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to local db:absolute:[TEST_PATH]/db/common/PG_VERSION, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/common/PG_VERSION.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common/PG_VERSION.backrest.tmp to absolute:[TEST_PATH]/db/common/PG_VERSION, destination_path_create = false
 INFO: [TEST_PATH]/db/common/PG_VERSION restore (3B, 100%) checksum e1f7a3a299f62225cba076fc6d3d6e677f303482
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/recovery.conf
 INFO: wrote [TEST_PATH]/db/common/recovery.conf
 INFO: restore complete
DEBUG:     safe exit called, terminating threads

incr backup (invalid database version)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
ERROR: [126]: database version = 9.3, system-id 6156904820763115222 does not match backup version = 8.0, system-id = 6156904820763115222
              HINT: are you backing up to the correct stanza?
DEBUG:     safe exit called, terminating threads

incr backup (invalid system id)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
ERROR: [126]: database version = 9.3, system-id 6156904820763115222 does not match backup version = 9.3, system-id = 6999999999999999999
              HINT: are you backing up to the correct stanza?
DEBUG:     safe exit called, terminating threads

incr backup (invalid control version)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
ERROR: [126]: database control-version = 937, catalog-version 201306121 does not match backup control-version = 842, catalog-version = 201306121
              HINT: this may be a symptom of database or repository corruption!
DEBUG:     safe exit called, terminating threads

incr backup (invalid catalog version)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
ERROR: [126]: database control-version = 937, catalog-version 201306121 does not match backup control-version = 937, catalog-version = 197208141
              HINT: this may be a symptom of database or repository corruption!
DEBUG:     safe exit called, terminating threads

incr backup (add tablespace 1)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common/pg_tblspc
DEBUG:     Found tablespace 1
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts1
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/base/base1.txt to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/base/base1.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/1, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/badchecksum.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/badchecksum.txt (11B, 61%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts1/tablespace1.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1/tablespace1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1/tablespace1.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1
 INFO: backup file [TEST_PATH]/db/tablespace/ts1/tablespace1.txt (7B, 100%) checksum d85de07d6421d90aa9191c11c889bfde43680f0f
 INFO: total backup size: 18B
 INFO: new backup label: [BACKUP-INCR-1]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-1]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-INCR-1], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-INCR-1] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-INCR-1]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
# cluster-specific settings
[db]
db-path=[TEST_PATH]/db/common

# backup settings
[global:backup]
backup-host=127.0.0.1
backup-user=backrest

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
# cluster-specific settings
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common
db-user=dsteele

# cluster-specific command options
[db:command]
cmd-psql-option=--port=[PORT-1]

# backup settings
[global:backup]
archive-copy=y
hardlink=y
start-fast=y

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-1]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-INCR-1]"
backup-prior="[BACKUP-FULL-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="incr"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common"}
tablespace/1={"link":"1","path":"[TEST_PATH]/db/tablespace/ts1"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"a3b357a3e395e43fcfb19bb13f3c1b5179279593","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":4,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/1={"destination":"[TEST_PATH]/db/tablespace/ts1","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/1:file]
tablespace1.txt={"checksum":"d85de07d6421d90aa9191c11c889bfde43680f0f","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/1:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

incr backup (resume and add tablespace 2)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup --test --test-delay=0
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 WARN: backup [BACKUP-INCR-1] is missing from the repository - removed from backup.info
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common/pg_tblspc
DEBUG:     Found tablespace 1
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts1
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2
DEBUG:     File->wait: db:absolute
 WARN: aborted backup of same type exists, will be cleaned to remove invalid files and resumed
 INFO: cleaning backup tmp path
DEBUG:     File->manifest: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp
DEBUG:     remove file [TEST_PATH]/backrest/temp/db.tmp/base/link-test
DEBUG:     remove file [TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control
DEBUG:     remove file [TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt
DEBUG:     remove file [TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/base/base1.txt to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/base/base1.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/1, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->hash: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, compressed = false, hash_type = sha1
 WARN: resumed backup file base/badchecksum.txt should have checksum bogus but actually has checksum f927212cd08d11a42a666b2f04235398e9ceeb51.  The file will be recopied and backup will continue but this may be an issue unless the backup temp path is known to be corrupted.
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/badchecksum.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/badchecksum.txt (11B, 44%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->hash: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1/tablespace1.txt, compressed = false, hash_type = sha1
 INFO: checksum resumed file [TEST_PATH]/db/tablespace/ts1/tablespace1.txt (7B, 72%) checksum d85de07d6421d90aa9191c11c889bfde43680f0f
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2/tablespace2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2
 INFO: backup file [TEST_PATH]/db/tablespace/ts2/tablespace2.txt (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
 INFO: total backup size: 25B
 INFO: new backup label: [BACKUP-INCR-2]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-2]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-INCR-2], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-INCR-2] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-INCR-2]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
# cluster-specific settings
[db]
db-path=[TEST_PATH]/db/common

# backup settings
[global:backup]
backup-host=127.0.0.1
backup-user=backrest

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
# cluster-specific settings
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common
db-user=dsteele

# cluster-specific command options
[db:command]
cmd-psql-option=--port=[PORT-1]

# backup settings
[global:backup]
archive-copy=y
hardlink=y
start-fast=y

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-2]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-INCR-2]"
backup-prior="[BACKUP-FULL-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="incr"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common"}
tablespace/1={"link":"1","path":"[TEST_PATH]/db/tablespace/ts1"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"a3b357a3e395e43fcfb19bb13f3c1b5179279593","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":4,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/1={"destination":"[TEST_PATH]/db/tablespace/ts1","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/1:file]
tablespace1.txt={"checksum":"d85de07d6421d90aa9191c11c889bfde43680f0f","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/1:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

diff backup (cannot resume - new diff)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --type=diff --stanza=db backup --test --test-delay=0
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = diff
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 WARN: backup [BACKUP-INCR-2] is missing from the repository - removed from backup.info
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 0, incremental = 0: ^[0-9]{8}\-[0-9]{6}F$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common/pg_tblspc
DEBUG:     Found tablespace 1
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts1
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2
DEBUG:     File->wait: db:absolute
 WARN: aborted backup exists, but cannot be resumed (new type 'diff' does not match aborted type 'incr') - will be dropped and recreated
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/base/base1.txt to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/base/base1.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/1, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/badchecksum.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/badchecksum.txt (11B, 44%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts1/tablespace1.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1/tablespace1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1/tablespace1.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1
 INFO: backup file [TEST_PATH]/db/tablespace/ts1/tablespace1.txt (7B, 72%) checksum d85de07d6421d90aa9191c11c889bfde43680f0f
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2/tablespace2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2
 INFO: backup file [TEST_PATH]/db/tablespace/ts2/tablespace2.txt (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
 INFO: total backup size: 25B
 INFO: new backup label: [BACKUP-DIFF-1]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-1]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-DIFF-1], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-1] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-DIFF-1]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
# cluster-specific settings
[db]
db-path=[TEST_PATH]/db/common

# backup settings
[global:backup]
backup-host=127.0.0.1
backup-user=backrest

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
# cluster-specific settings
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common
db-user=dsteele

# cluster-specific command options
[db:command]
cmd-psql-option=--port=[PORT-1]

# backup settings
[global:backup]
archive-copy=y
hardlink=y
start-fast=y

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-1]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-DIFF-1]"
backup-prior="[BACKUP-FULL-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="diff"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common"}
tablespace/1={"link":"1","path":"[TEST_PATH]/db/tablespace/ts1"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"a3b357a3e395e43fcfb19bb13f3c1b5179279593","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":4,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/1={"destination":"[TEST_PATH]/db/tablespace/ts1","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/1:file]
tablespace1.txt={"checksum":"d85de07d6421d90aa9191c11c889bfde43680f0f","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/1:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

diff backup (cannot resume - disabled)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --no-resume --type=diff --stanza=db backup --test --test-delay=0
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=0 remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = diff
DEBUG:     cluster path is [TEST_PATH]/db/common
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 WARN: backup [BACKUP-DIFF-1] is missing from the repository - removed from backup.info
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 0, incremental = 0: ^[0-9]{8}\-[0-9]{6}F$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common/pg_tblspc
DEBUG:     Found tablespace 1
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts1
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2
DEBUG:     File->wait: db:absolute
 WARN: aborted backup exists, but cannot be resumed (resume is disabled) - will be dropped and recreated
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/base/base1.txt to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/base/base1.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/1, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common/badchecksum.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common/badchecksum.txt (11B, 44%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts1/tablespace1.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1/tablespace1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1/tablespace1.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/1
 INFO: backup file [TEST_PATH]/db/tablespace/ts1/tablespace1.txt (7B, 72%) checksum d85de07d6421d90aa9191c11c889bfde43680f0f
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2/tablespace2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2
 INFO: backup file [TEST_PATH]/db/tablespace/ts2/tablespace2.txt (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
 INFO: total backup size: 25B
 INFO: new backup label: [BACKUP-DIFF-2]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-DIFF-2], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-DIFF-2]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
# cluster-specific settings
[db]
db-path=[TEST_PATH]/db/common

# backup settings
[global:backup]
backup-host=127.0.0.1
backup-user=backrest

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
# cluster-specific settings
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common
db-user=dsteele

# cluster-specific command options
[db:command]
cmd-psql-option=--port=[PORT-1]

# backup settings
[global:backup]
archive-copy=y
hardlink=y
start-fast=y

# psql command and options
[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

# general settings for all operations
[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

# file and console log settings
[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-DIFF-2]"
backup-prior="[BACKUP-FULL-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="diff"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common"}
tablespace/1={"link":"1","path":"[TEST_PATH]/db/tablespace/ts1"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"a3b357a3e395e43fcfb19bb13f3c1b5179279593","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":4,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/1={"destination":"[TEST_PATH]/db/tablespace/ts1","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/1:file]
tablespace1.txt={"checksum":"d85de07d6421d90aa9191c11c889bfde43680f0f","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/1:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

restore, backup '[BACKUP-DIFF-2]', expect exit 115 (fail on used path)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --set=[BACKUP-DIFF-2] --stanza=db restore
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
 INFO: Restoring backup set [BACKUP-DIFF-2]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/backup.manifest to local db:absolute:[TEST_PATH]/db/common/backup.manifest, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [undef], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common/backup.manifest.backrest.tmp to absolute:[TEST_PATH]/db/common/backup.manifest, destination_path_create = false
DEBUG:     File->remove: db:absolute:[TEST_PATH]/db/common/backup.manifest
 INFO: checking/cleaning db path [TEST_PATH]/db/common
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common
ERROR: [115]: cannot restore to path '[TEST_PATH]/db/common' that contains files - try using --delta if this is what you intended
DEBUG:     safe exit called, terminating threads

restore, backup '[BACKUP-DIFF-2]', expect exit 104 (fail on undef format)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --set=[BACKUP-DIFF-2] --stanza=db restore
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
 INFO: Restoring backup set [BACKUP-DIFF-2]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/backup.manifest to local db:absolute:[TEST_PATH]/db/common/backup.manifest, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [undef], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common/backup.manifest.backrest.tmp to absolute:[TEST_PATH]/db/common/backup.manifest, destination_path_create = false
ERROR: [104]: format of [TEST_PATH]/db/common/backup.manifest is 0 but 4 is required by this  version of PgBackRest.
DEBUG:     safe exit called, terminating threads

restore, backup '[BACKUP-DIFF-2]', expect exit 104 (fail on mismatch format)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --set=[BACKUP-DIFF-2] --stanza=db restore
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common/postmaster.pid
 INFO: Restoring backup set [BACKUP-DIFF-2]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/backup.manifest to local db:absolute:[TEST_PATH]/db/common/backup.manifest, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [undef], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common/backup.manifest.backrest.tmp to absolute:[TEST_PATH]/db/common/backup.manifest, destination_path_create = false
ERROR: [104]: format of [TEST_PATH]/db/common/backup.manifest is 0 but 4 is required by this  version of PgBackRest.
DEBUG:     safe exit called, terminating threads

restore, backup '[BACKUP-DIFF-2]', remap (remap all paths)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --set=[BACKUP-DIFF-2] --stanza=db restore
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
 INFO: Restoring backup set [BACKUP-DIFF-2]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/backup.manifest to local db:absolute:[TEST_PATH]/db/common-2/backup.manifest, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [undef], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/backup.manifest.backrest.tmp to absolute:[TEST_PATH]/db/common-2/backup.manifest, destination_path_create = false
DEBUG:     File->remove: db:absolute:[TEST_PATH]/db/common-2/backup.manifest
 INFO: base path remapped to [TEST_PATH]/db/common-2
 INFO: remapping tablespace 1 to [TEST_PATH]/db/tablespace/ts1-2
 INFO: remapping tablespace 2 to [TEST_PATH]/db/tablespace/ts2-2
 INFO: checking/cleaning db path [TEST_PATH]/db/common-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
 INFO: checking/cleaning db path [TEST_PATH]/db/tablespace/ts1-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/tablespace/ts1-2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts1-2
 INFO: checking/cleaning db path [TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/base
DEBUG:     File->path_create: db:absolute:[TEST_PATH]/db/common-2/base, mode 0700
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/global
DEBUG:     File->path_create: db:absolute:[TEST_PATH]/db/common-2/global, mode 0700
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/path-test
DEBUG:     File->path_create: db:absolute:[TEST_PATH]/db/common-2/path-test, mode 0700
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     File->path_create: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc, mode 0700
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/link-test
DEBUG:     File->link_create: db:absolute:/test to db:absolute:[TEST_PATH]/db/common-2/link-test, hard = false, relative = false, destination_path_create = true
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/1
DEBUG:     File->link_create: db:absolute:[TEST_PATH]/db/tablespace/ts1-2 to db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/1, hard = false, relative = false, destination_path_create = true
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2
DEBUG:     File->link_create: db:absolute:[TEST_PATH]/db/tablespace/ts2-2 to db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2, hard = false, relative = false, destination_path_create = true
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/tablespace/ts1-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     starting restore in main process
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/global/pg_control
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/base/global/pg_control to local db:absolute:[TEST_PATH]/db/common-2/global/pg_control, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-1], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/common-2/global/pg_control.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/global/pg_control.backrest.tmp to absolute:[TEST_PATH]/db/common-2/global/pg_control, destination_path_create = false
 INFO: [TEST_PATH]/db/common-2/global/pg_control restore (8KB, 99%) checksum 56fe5780b8dca9705e0c22032a83828860a21235
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/badchecksum.txt
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/base/badchecksum.txt to local db:absolute:[TEST_PATH]/db/common-2/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/common-2/badchecksum.txt.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/badchecksum.txt.backrest.tmp to absolute:[TEST_PATH]/db/common-2/badchecksum.txt, destination_path_create = false
 INFO: [TEST_PATH]/db/common-2/badchecksum.txt restore (11B, 99%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/base/base1.txt
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/base/base/base1.txt to local db:absolute:[TEST_PATH]/db/common-2/base/base1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/common-2/base/base1.txt.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/base/base1.txt.backrest.tmp to absolute:[TEST_PATH]/db/common-2/base/base1.txt, destination_path_create = false
 INFO: [TEST_PATH]/db/common-2/base/base1.txt restore (4B, 99%) checksum a3b357a3e395e43fcfb19bb13f3c1b5179279593
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/PG_VERSION
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/base/PG_VERSION to local db:absolute:[TEST_PATH]/db/common-2/PG_VERSION, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/common-2/PG_VERSION.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/PG_VERSION.backrest.tmp to absolute:[TEST_PATH]/db/common-2/PG_VERSION, destination_path_create = false
 INFO: [TEST_PATH]/db/common-2/PG_VERSION restore (3B, 99%) checksum e1f7a3a299f62225cba076fc6d3d6e677f303482
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/tablespace/ts1-2/tablespace1.txt
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/tablespace/1/tablespace1.txt to local db:absolute:[TEST_PATH]/db/tablespace/ts1-2/tablespace1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/tablespace/ts1-2/tablespace1.txt.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/tablespace/ts1-2/tablespace1.txt.backrest.tmp to absolute:[TEST_PATH]/db/tablespace/ts1-2/tablespace1.txt, destination_path_create = false
 INFO: [TEST_PATH]/db/tablespace/ts1-2/tablespace1.txt restore (7B, 99%) checksum d85de07d6421d90aa9191c11c889bfde43680f0f
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/tablespace/2/tablespace2.txt to local db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt.backrest.tmp to absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt, destination_path_create = false
 INFO: [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt restore (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/recovery.conf
 INFO: wrote [TEST_PATH]/db/common-2/recovery.conf
 INFO: restore complete
DEBUG:     safe exit called, terminating threads

incr backup (add files and remove tablespace 2)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common-2
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-DIFF-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common-2, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common-2/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/badchecksum.txt to [BACKUP-DIFF-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/base/badchecksum.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/base/base1.txt to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/base/base1.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt to [BACKUP-DIFF-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/tablespace/2/tablespace2.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/base/base2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/base/base2.txt (5B, 38%) checksum 09b5e31766be1dba1ec27de82f975c1b6eea2a92
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2b.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2b.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2b.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/tablespace/ts2-2/tablespace2b.txt (8B, 100%) checksum e324463005236d83e6e54795dbddd20a74533bf3
 INFO: total backup size: 13B
 INFO: new backup label: [BACKUP-INCR-3]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-3]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-INCR-3], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-INCR-3] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-INCR-3]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
[db]
db-path=[TEST_PATH]/db/common-2

[db:restore:tablespace-map]
1=[TEST_PATH]/db/tablespace/ts1-2
2=[TEST_PATH]/db/tablespace/ts2-2

[global:backup]
backup-host=127.0.0.1
backup-user=backrest

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common-2
db-user=dsteele

[db:command]
cmd-psql-option=--port=[PORT-1]

[global:backup]
archive-copy=y
hardlink=y
start-fast=y

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-3]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-INCR-3]"
backup-prior="[BACKUP-DIFF-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="incr"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common-2"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2-2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-2]","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"a3b357a3e395e43fcfb19bb13f3c1b5179279593","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":4,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base2.txt={"checksum":"09b5e31766be1dba1ec27de82f975c1b6eea2a92","group":"[GROUP-1]","mode":"0600","size":5,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2-2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-2]","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
tablespace2b.txt={"checksum":"e324463005236d83e6e54795dbddd20a74533bf3","group":"[GROUP-1]","mode":"0600","size":8,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

incr backup (update files)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common-2
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-INCR-3], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common-2, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common-2/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/badchecksum.txt to [BACKUP-DIFF-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/base/badchecksum.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/base/base2.txt to [BACKUP-INCR-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-INCR-3]/base/base/base2.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt to [BACKUP-DIFF-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-2]/tablespace/2/tablespace2.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/tablespace/ts2-2/tablespace2b.txt to [BACKUP-INCR-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-INCR-3]/tablespace/2/tablespace2b.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2b.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/base/base1.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/base/base1.txt (8B, 100%) checksum 9a53d532e27785e681766c98516a5e93f096a501
 INFO: total backup size: 8B
 INFO: new backup label: [BACKUP-INCR-4]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-4]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-INCR-4], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-INCR-4] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-INCR-4]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
[db]
db-path=[TEST_PATH]/db/common-2

[db:restore:tablespace-map]
1=[TEST_PATH]/db/tablespace/ts1-2
2=[TEST_PATH]/db/tablespace/ts2-2

[global:backup]
backup-host=127.0.0.1
backup-user=backrest

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common-2
db-user=dsteele

[db:command]
cmd-psql-option=--port=[PORT-1]

[global:backup]
archive-copy=y
hardlink=y
start-fast=y

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-4]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-INCR-4]"
backup-prior="[BACKUP-INCR-3]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="incr"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common-2"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2-2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-2]","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"9a53d532e27785e681766c98516a5e93f096a501","group":"[GROUP-1]","mode":"0600","size":8,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base2.txt={"checksum":"09b5e31766be1dba1ec27de82f975c1b6eea2a92","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-INCR-3]","size":5,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2-2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-2]","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
tablespace2b.txt={"checksum":"e324463005236d83e6e54795dbddd20a74533bf3","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-INCR-3]","size":8,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

diff backup (no updates)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --type=diff --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = diff
DEBUG:     cluster path is [TEST_PATH]/db/common-2
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 0, incremental = 0: ^[0-9]{8}\-[0-9]{6}F$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common-2, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common-2/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/badchecksum.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/badchecksum.txt (11B, 28%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/base/base1.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/base/base1.txt (8B, 48%) checksum 9a53d532e27785e681766c98516a5e93f096a501
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/base/base2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/base/base2.txt (5B, 61%) checksum 09b5e31766be1dba1ec27de82f975c1b6eea2a92
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2b.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2b.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2b.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2
 INFO: backup file [TEST_PATH]/db/tablespace/ts2-2/tablespace2b.txt (8B, 82%) checksum e324463005236d83e6e54795dbddd20a74533bf3
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
 INFO: total backup size: 39B
 INFO: new backup label: [BACKUP-DIFF-3]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-DIFF-3], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-DIFF-3]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
[db]
db-path=[TEST_PATH]/db/common-2

[db:restore:tablespace-map]
1=[TEST_PATH]/db/tablespace/ts1-2
2=[TEST_PATH]/db/tablespace/ts2-2

[global:backup]
backup-host=127.0.0.1
backup-user=backrest

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common-2
db-user=dsteele

[db:command]
cmd-psql-option=--port=[PORT-1]

[global:backup]
archive-copy=y
hardlink=y
start-fast=y

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-DIFF-3]"
backup-prior="[BACKUP-FULL-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="diff"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common-2"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2-2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"9a53d532e27785e681766c98516a5e93f096a501","group":"[GROUP-1]","mode":"0600","size":8,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base2.txt={"checksum":"09b5e31766be1dba1ec27de82f975c1b6eea2a92","group":"[GROUP-1]","mode":"0600","size":5,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2-2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
tablespace2b.txt={"checksum":"e324463005236d83e6e54795dbddd20a74533bf3","group":"[GROUP-1]","mode":"0600","size":8,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

incr backup (remove files - but won't affect manifest)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --stanza=db backup --test --test-delay=1
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=1 remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=1 remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = incr
DEBUG:     cluster path is [TEST_PATH]/db/common-2
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 1, incremental = 1: ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F(\_[0-9]{8}\-[0-9]{6}(D|I)){0,1}$, sort reverse
 INFO: last backup label = [BACKUP-DIFF-3], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common-2, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common-2/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/badchecksum.txt to [BACKUP-DIFF-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3]/base/badchecksum.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/base/base1.txt to [BACKUP-DIFF-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3]/base/base/base1.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/base/base2.txt to [BACKUP-DIFF-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3]/base/base/base2.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt to [BACKUP-DIFF-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3]/tablespace/2/tablespace2.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/tablespace/ts2-2/tablespace2b.txt to [BACKUP-DIFF-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-3]/tablespace/2/tablespace2b.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2b.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
 INFO: new backup label: [BACKUP-INCR-5]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-5]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-INCR-5], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-INCR-5] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-INCR-5]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
[db]
db-path=[TEST_PATH]/db/common-2

[db:restore:tablespace-map]
1=[TEST_PATH]/db/tablespace/ts1-2
2=[TEST_PATH]/db/tablespace/ts2-2

[global:backup]
backup-host=127.0.0.1
backup-user=backrest

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common-2
db-user=dsteele

[db:command]
cmd-psql-option=--port=[PORT-1]

[global:backup]
archive-copy=y
hardlink=y
start-fast=y

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-INCR-5]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-INCR-5]"
backup-prior="[BACKUP-DIFF-3]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="incr"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common-2"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2-2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-3]","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"9a53d532e27785e681766c98516a5e93f096a501","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-3]","size":8,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base2.txt={"checksum":"09b5e31766be1dba1ec27de82f975c1b6eea2a92","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-3]","size":5,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2-2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-3]","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
tablespace2b.txt={"checksum":"e324463005236d83e6e54795dbddd20a74533bf3","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-DIFF-3]","size":8,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

diff backup (remove files during backup)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --type=diff --stanza=db backup --test --test-delay=1
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=1 remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db --test --test-delay=1 remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = diff
DEBUG:     cluster path is [TEST_PATH]/db/common-2
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 0, incremental = 0: ^[0-9]{8}\-[0-9]{6}F$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F$, sort reverse
 INFO: last backup label = [BACKUP-FULL-2], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common-2, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common-2/PG_VERSION to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/global/pg_control to [BACKUP-FULL-2]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-2]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/badchecksum.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/badchecksum.txt (11B, 35%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/base/base2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
 INFO: skip file removed by database: [TEST_PATH]/db/common-2/base/base2.txt
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2c.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2c.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2c.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2
 INFO: backup file [TEST_PATH]/db/tablespace/ts2-2/tablespace2c.txt (12B, 77%) checksum dfcb8679956b734706cf87259d50c88f83e80e66
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
 INFO: total backup size: 31B
 INFO: new backup label: [BACKUP-DIFF-4]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-4]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-DIFF-4], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-4] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-DIFF-4]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
[db]
db-path=[TEST_PATH]/db/common-2

[db:restore:tablespace-map]
1=[TEST_PATH]/db/tablespace/ts1-2
2=[TEST_PATH]/db/tablespace/ts2-2

[global:backup]
backup-host=127.0.0.1
backup-user=backrest

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common-2
db-user=dsteele

[db:command]
cmd-psql-option=--port=[PORT-1]

[global:backup]
archive-copy=y
hardlink=y
start-fast=y

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-4]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-DIFF-4]"
backup-prior="[BACKUP-FULL-2]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="diff"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common-2"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2-2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-2]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2-2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
tablespace2c.txt={"checksum":"dfcb8679956b734706cf87259d50c88f83e80e66","group":"[GROUP-1]","mode":"0600","size":12,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10431,"backup-info-repo-size-delta":2236,"backup-info-size":8225,"backup-info-size-delta":30,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10431,"backup-info-repo-size-delta":2236,"backup-info-size":8225,"backup-info-size-delta":30,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

full backup
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --type=full --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = full
DEBUG:     cluster path is [TEST_PATH]/db/common-2
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common-2, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/global/pg_control to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-1], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/global/pg_control (8KB, 99%) checksum 56fe5780b8dca9705e0c22032a83828860a21235
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/badchecksum.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/badchecksum.txt (11B, 99%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/base/base1.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/base/base1.txt (9B, 99%) checksum 7579ada0808d7f98087a0a586d0df9de009cdc33
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/PG_VERSION to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/PG_VERSION (3B, 99%) checksum e1f7a3a299f62225cba076fc6d3d6e677f303482
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2c.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2c.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2c.txt, destination_path_create = true
DEBUG:     File->path_create: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->exists: absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2
 INFO: backup file [TEST_PATH]/db/tablespace/ts2-2/tablespace2c.txt (12B, 99%) checksum dfcb8679956b734706cf87259d50c88f83e80e66
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
 INFO: total backup size: 8KB
 INFO: new backup label: [BACKUP-FULL-3]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-FULL-3], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-FULL-3]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
[db]
db-path=[TEST_PATH]/db/common-2

[db:restore:tablespace-map]
1=[TEST_PATH]/db/tablespace/ts1-2
2=[TEST_PATH]/db/tablespace/ts2-2

[global:backup]
backup-host=127.0.0.1
backup-user=backrest

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common-2
db-user=dsteele

[db:command]
cmd-psql-option=--port=[PORT-1]

[global:backup]
archive-copy=y
hardlink=y
start-fast=y

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-FULL-3]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="full"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common-2"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2-2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"7579ada0808d7f98087a0a586d0df9de009cdc33","group":"[GROUP-1]","mode":"0600","size":9,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2-2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
tablespace2c.txt={"checksum":"dfcb8679956b734706cf87259d50c88f83e80e66","group":"[GROUP-1]","mode":"0600","size":12,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10431,"backup-info-repo-size-delta":2236,"backup-info-size":8225,"backup-info-size-delta":30,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10479,"backup-info-repo-size-delta":10479,"backup-info-size":8234,"backup-info-size-delta":8234,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10431,"backup-info-repo-size-delta":2236,"backup-info-size":8225,"backup-info-size-delta":30,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10479,"backup-info-repo-size-delta":10479,"backup-info-size":8234,"backup-info-size-delta":8234,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

diff backup (add files)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/backrest/pg_backrest.conf --no-start-stop --type=diff --stanza=db backup
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-1]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-1]
 INFO: backup start: type = diff
DEBUG:     cluster path is [TEST_PATH]/db/common-2
DEBUG:     File->path_create: backup:cluster:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
DEBUG:     BackupCommon::backupRegExpGet: full = 1, differential = 0, incremental = 0: ^[0-9]{8}\-[0-9]{6}F$
DEBUG:     File->list: backup:cluster:[TEST_PATH]/backrest/backup/db, expression ^[0-9]{8}\-[0-9]{6}F$, sort reverse
 INFO: last backup label = [BACKUP-FULL-3], version = [VERSION-1]
DEBUG:     Db->info(): dbPath = [TEST_PATH]/db/common-2, isRemote = true
DEBUG:     Db->info=>: dbVersion = 9.3, controlVersion = 937, catalogVersion = 201306121, dbSysId = 6156904820763115222
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     Found tablespace 2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     Manifest->build
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/tablespace/ts2-2
DEBUG:     File->wait: db:absolute
DEBUG:     creating backup path [TEST_PATH]/backrest/temp/db.tmp
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/path-test, mode [undef]
DEBUG:     File->path_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     File->link_create: backup:absolute:/test to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/link-test, hard = false, relative = false, destination_path_create = false
DEBUG:     hardlink [TEST_PATH]/db/common-2/PG_VERSION to [BACKUP-FULL-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]/base/PG_VERSION to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/PG_VERSION, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/badchecksum.txt to [BACKUP-FULL-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]/base/badchecksum.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/badchecksum.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/base/base1.txt to [BACKUP-FULL-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]/base/base/base1.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base1.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/common-2/global/pg_control to [BACKUP-FULL-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]/base/global/pg_control to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/global/pg_control, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/global, mode [undef]
DEBUG:     File->link_create: backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2 to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc/2, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/base/pg_tblspc, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/tablespace/ts2-2/tablespace2.txt to [BACKUP-FULL-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]/tablespace/2/tablespace2.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     hardlink [TEST_PATH]/db/tablespace/ts2-2/tablespace2c.txt to [BACKUP-FULL-3]
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-FULL-3]/tablespace/2/tablespace2c.txt to backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2/tablespace2c.txt, hard = true, relative = false, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/temp/db.tmp/tablespace/2, mode [undef]
DEBUG:     File->copy: remote db:absolute:[TEST_PATH]/db/common-2/base/base2.txt to local backup:tmp:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = true, destination_path_create = true, modification_time = [MODIFICATION-TIME-2], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/backrest/temp/db.tmp/file.tmp to absolute:[TEST_PATH]/backrest/temp/db.tmp/base/base/base2.txt, destination_path_create = true
 INFO: backup file [TEST_PATH]/db/common-2/base/base2.txt (9B, 100%) checksum cafac3c59553f2cfde41ce2e62e7662295f108c0
 INFO: total backup size: 9B
 INFO: new backup label: [BACKUP-DIFF-5]
DEBUG:     moving [TEST_PATH]/backrest/temp/db.tmp to [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-5]
DEBUG:     File->move: backup:tmp to backup:cluster:[BACKUP-DIFF-5], destination_path_create = false
DEBUG:     File->remove: backup:cluster:[TEST_PATH]/backrest/backup/db/latest
DEBUG:     File->link_create: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-5] to backup:cluster:[TEST_PATH]/backrest/backup/db/latest, hard = false, relative = true, destination_path_create = true
DEBUG:     File->path_create: backup:absolute:[TEST_PATH]/backrest/backup/db, mode [undef]
DEBUG:     BackupInfo->backupAdd: backupLabel = [BACKUP-DIFF-5]
 INFO: backup stop
DEBUG:     BackupInfo->new: backupClusterPath = [TEST_PATH]/backrest/backup/db
 INFO: archive rentention type not set - archive logs will not be expired
DEBUG:     safe exit called, terminating threads

+ supplemental file: [TEST_PATH]/db/pg_backrest.conf
----------------------------------------------------
[db]
db-path=[TEST_PATH]/db/common-2

[db:restore:tablespace-map]
1=[TEST_PATH]/db/tablespace/ts1-2
2=[TEST_PATH]/db/tablespace/ts2-2

[global:backup]
backup-host=127.0.0.1
backup-user=backrest

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/local
repo-remote-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/pg_backrest.conf
----------------------------------------------------------
[db]
db-host=127.0.0.1
db-path=[TEST_PATH]/db/common-2
db-user=dsteele

[db:command]
cmd-psql-option=--port=[PORT-1]

[global:backup]
archive-copy=y
hardlink=y
start-fast=y

[global:command]
cmd-psql=[PGSQL_BIN_PATH]/psql -X %option% -h [TEST_PATH]/db
cmd-remote=[BACKREST_BIN_PATH]/pg_backrest

[global:general]
compress=n
repo-path=[TEST_PATH]/backrest

[global:log]
log-level-console=debug
log-level-file=trace

+ supplemental file: [TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-5]/backup.manifest
-----------------------------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup]
backup-label="[BACKUP-DIFF-5]"
backup-prior="[BACKUP-FULL-3]"
backup-timestamp-copy-start=[TIMESTAMP]
backup-timestamp-start=[TIMESTAMP]
backup-timestamp-stop=[TIMESTAMP]
backup-type="diff"

[backup:db]
db-catalog-version=201306121
db-control-version=937
db-system-id=6156904820763115222
db-version="9.3"

[backup:option]
option-archive-check=true
option-archive-copy=true
option-compress=false
option-hardlink=true
option-start-stop=false

[backup:path]
base={"path":"[TEST_PATH]/db/common-2"}
tablespace/2={"link":"2","path":"[TEST_PATH]/db/tablespace/ts2-2"}

[base:file]
PG_VERSION={"checksum":"e1f7a3a299f62225cba076fc6d3d6e677f303482","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-3]","size":3,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
badchecksum.txt={"checksum":"f927212cd08d11a42a666b2f04235398e9ceeb51","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-3]","size":11,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base1.txt={"checksum":"7579ada0808d7f98087a0a586d0df9de009cdc33","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-3]","size":9,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
base/base2.txt={"checksum":"cafac3c59553f2cfde41ce2e62e7662295f108c0","group":"[GROUP-1]","mode":"0600","size":9,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
global/pg_control={"checksum":"56fe5780b8dca9705e0c22032a83828860a21235","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-3]","size":8192,"timestamp":[TIMESTAMP-2],"user":"[USER-1]"}

[base:link]
link-test={"destination":"/test","group":"[GROUP-1]","user":"[USER-1]"}
pg_tblspc/2={"destination":"[TEST_PATH]/db/tablespace/ts2-2","group":"[GROUP-1]","user":"[USER-1]"}

[base:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
base={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
global={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
path-test={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}
pg_tblspc={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

[tablespace/2:file]
tablespace2.txt={"checksum":"dc7f76e43c46101b47acc55ae4d593a9e6983578","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-3]","size":7,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}
tablespace2c.txt={"checksum":"dfcb8679956b734706cf87259d50c88f83e80e66","group":"[GROUP-1]","mode":"0600","reference":"[BACKUP-FULL-3]","size":12,"timestamp":[TIMESTAMP-1],"user":"[USER-1]"}

[tablespace/2:path]
.={"group":"[GROUP-1]","mode":"0700","user":"[USER-1]"}

+ supplemental file: [TEST_PATH]/backrest/backup/db/backup.info
---------------------------------------------------------------
[backrest]
backrest-checksum="[CHECKSUM]"
backrest-format=4
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10431,"backup-info-repo-size-delta":2236,"backup-info-size":8225,"backup-info-size-delta":30,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10479,"backup-info-repo-size-delta":10479,"backup-info-size":8234,"backup-info-size-delta":8234,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10873,"backup-info-repo-size-delta":2639,"backup-info-size":8243,"backup-info-size-delta":9,"backup-prior":"[BACKUP-FULL-3]","backup-reference":["[BACKUP-FULL-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[backup:history]
[BACKUP-FULL-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":9657,"backup-info-repo-size-delta":9657,"backup-info-size":8199,"backup-info-size-delta":8199,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10445,"backup-info-repo-size-delta":2246,"backup-info-size":8217,"backup-info-size-delta":18,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-1]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-2]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10928,"backup-info-repo-size-delta":2729,"backup-info-size":8224,"backup-info-size-delta":25,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10879,"backup-info-repo-size-delta":2662,"backup-info-size":8230,"backup-info-size-delta":13,"backup-prior":"[BACKUP-DIFF-2]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10948,"backup-info-repo-size-delta":2722,"backup-info-size":8234,"backup-info-size-delta":8,"backup-prior":"[BACKUP-INCR-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-2]","[BACKUP-INCR-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10739,"backup-info-repo-size-delta":2544,"backup-info-size":8234,"backup-info-size-delta":39,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-INCR-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10996,"backup-info-repo-size-delta":2762,"backup-info-size":8234,"backup-info-size-delta":0,"backup-prior":"[BACKUP-DIFF-3]","backup-reference":["[BACKUP-FULL-2]","[BACKUP-DIFF-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-4]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10431,"backup-info-repo-size-delta":2236,"backup-info-size":8225,"backup-info-size-delta":30,"backup-prior":"[BACKUP-FULL-2]","backup-reference":["[BACKUP-FULL-2]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-FULL-3]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10479,"backup-info-repo-size-delta":10479,"backup-info-size":8234,"backup-info-size-delta":8234,"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}
[BACKUP-DIFF-5]={"backrest-format":4,"backrest-version":"[VERSION-1]","backup-archive-start":null,"backup-archive-stop":null,"backup-info-repo-size":10873,"backup-info-repo-size-delta":2639,"backup-info-size":8243,"backup-info-size-delta":9,"backup-prior":"[BACKUP-FULL-3]","backup-reference":["[BACKUP-FULL-3]"],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":true,"option-compress":false,"option-hardlink":true,"option-start-stop":false}

[db]
db-catalog-version=201306121
db-control-version=937
db-id=1
db-system-id=6156904820763115222
db-version="9.3"

[db:history]
1={"db-catalog-version":201306121,"db-control-version":937,"db-system-id":6156904820763115222,"db-version":"9.3"}

restore delta, backup '[BACKUP-DIFF-5]' (no tablespace remap)
> [BACKREST_BIN_PATH]/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --delta --set=[BACKUP-DIFF-5] --no-tablespace  --stanza=db restore
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=db remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/postmaster.pid
 INFO: Restoring backup set [BACKUP-DIFF-5]
DEBUG:     File->exists: backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-5]
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-5]/backup.manifest to local db:absolute:[TEST_PATH]/db/common-2/backup.manifest, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [undef], mode = [undef], user = [undef], group = [undef]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/backup.manifest.backrest.tmp to absolute:[TEST_PATH]/db/common-2/backup.manifest, destination_path_create = false
DEBUG:     File->remove: db:absolute:[TEST_PATH]/db/common-2/backup.manifest
 INFO: remapping tablespace 2 to [TEST_PATH]/db/common-2/pg_tblspc/2
 INFO: checking/cleaning db path [TEST_PATH]/db/common-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     File->manifest: db:absolute:[TEST_PATH]/db/common-2
 INFO: removing file/link [TEST_PATH]/db/common-2/pg_tblspc/2
 INFO: checking/cleaning db path [TEST_PATH]/db/common-2/pg_tblspc/2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2
 INFO: 1 file(s) removed during cleanup
 INFO: 1 link(s) removed during cleanup
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/base
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/global
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/path-test
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2
DEBUG:     File->path_create: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2, mode 0700
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/link-test
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2
DEBUG:     starting restore in main process
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/global/pg_control
DEBUG:     File->hash: db:absolute:[TEST_PATH]/db/common-2/global/pg_control, compressed = false, hash_type = sha1
 INFO: [TEST_PATH]/db/common-2/global/pg_control exists and matches backup (8KB, 99%) checksum 56fe5780b8dca9705e0c22032a83828860a21235
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/badchecksum.txt
DEBUG:     File->hash: db:absolute:[TEST_PATH]/db/common-2/badchecksum.txt, compressed = false, hash_type = sha1
 INFO: [TEST_PATH]/db/common-2/badchecksum.txt exists and matches backup (11B, 99%) checksum f927212cd08d11a42a666b2f04235398e9ceeb51
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/base/base2.txt
DEBUG:     File->hash: db:absolute:[TEST_PATH]/db/common-2/base/base2.txt, compressed = false, hash_type = sha1
 INFO: [TEST_PATH]/db/common-2/base/base2.txt exists and matches backup (9B, 99%) checksum cafac3c59553f2cfde41ce2e62e7662295f108c0
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/base/base1.txt
DEBUG:     File->hash: db:absolute:[TEST_PATH]/db/common-2/base/base1.txt, compressed = false, hash_type = sha1
 INFO: [TEST_PATH]/db/common-2/base/base1.txt exists and matches backup (9B, 99%) checksum 7579ada0808d7f98087a0a586d0df9de009cdc33
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/PG_VERSION
DEBUG:     File->hash: db:absolute:[TEST_PATH]/db/common-2/PG_VERSION, compressed = false, hash_type = sha1
 INFO: [TEST_PATH]/db/common-2/PG_VERSION exists and matches backup (3B, 99%) checksum e1f7a3a299f62225cba076fc6d3d6e677f303482
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2c.txt
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-5]/tablespace/2/tablespace2c.txt to local db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2c.txt, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2c.txt.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2c.txt.backrest.tmp to absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2c.txt, destination_path_create = false
 INFO: [TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2c.txt restore (12B, 99%) checksum dfcb8679956b734706cf87259d50c88f83e80e66
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2.txt
DEBUG:     File->copy: remote backup:cluster:[TEST_PATH]/backrest/backup/db/[BACKUP-DIFF-5]/tablespace/2/tablespace2.txt to local db:absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2.txt, source_compressed = false, destination_compress = false, ignore_missing_source = false, destination_path_create = false, modification_time = [MODIFICATION-TIME-2], mode = 0600, user = [USER-1], group = [GROUP-1]
DEBUG:     File->owner: absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2.txt.backrest.tmp, user = [USER-1], group = [GROUP-1]
DEBUG:     File->move: absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2.txt.backrest.tmp to absolute:[TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2.txt, destination_path_create = false
 INFO: [TEST_PATH]/db/common-2/pg_tblspc/2/tablespace2.txt restore (7B, 100%) checksum dc7f76e43c46101b47acc55ae4d593a9e6983578
DEBUG:     File->exists: db:absolute:[TEST_PATH]/db/common-2/recovery.conf
DEBUG:     File->remove: db:absolute:[TEST_PATH]/db/common-2/recovery.conf
 INFO: wrote [TEST_PATH]/db/common-2/recovery.conf
 INFO: restore complete
DEBUG:     safe exit called, terminating threads

info
> ../bin/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf info
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     Info->listStanza
stanza db
   status: ok
   oldest backup label: [BACKUP-FULL-2]
   oldest backup timestamp: [TIMESTAMP-STR]
   latest backup label: [BACKUP-DIFF-5]
   latest backup timestamp: [TIMESTAMP-STR]

stanza db_empty
   status: error (no valid backups)
DEBUG:     safe exit called, terminating threads

info
> ../bin/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf info --output=json
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     Info->listStanza
[
   {
       "backup" : [
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 8199,
                   "repository" : {
                       "delta" : 9657,
                       "size" : 9657
                   },
                   "size" : 8199
               },
               "label" : "[BACKUP-FULL-2]",
               "prior" : null,
               "reference" : null,
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "full"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 25,
                   "repository" : {
                       "delta" : 2729,
                       "size" : 10928
                   },
                   "size" : 8224
               },
               "label" : "[BACKUP-DIFF-2]",
               "prior" : "[BACKUP-FULL-2]",
               "reference" : [
                   "[BACKUP-FULL-2]"
               ],
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "diff"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 13,
                   "repository" : {
                       "delta" : 2662,
                       "size" : 10879
                   },
                   "size" : 8230
               },
               "label" : "[BACKUP-INCR-3]",
               "prior" : "[BACKUP-DIFF-2]",
               "reference" : [
                   "[BACKUP-FULL-2]",
                   "[BACKUP-DIFF-2]"
               ],
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "incr"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 8,
                   "repository" : {
                       "delta" : 2722,
                       "size" : 10948
                   },
                   "size" : 8234
               },
               "label" : "[BACKUP-INCR-4]",
               "prior" : "[BACKUP-INCR-3]",
               "reference" : [
                   "[BACKUP-FULL-2]",
                   "[BACKUP-DIFF-2]",
                   "[BACKUP-INCR-3]"
               ],
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "incr"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 39,
                   "repository" : {
                       "delta" : 2544,
                       "size" : 10739
                   },
                   "size" : 8234
               },
               "label" : "[BACKUP-DIFF-3]",
               "prior" : "[BACKUP-FULL-2]",
               "reference" : [
                   "[BACKUP-FULL-2]"
               ],
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "diff"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 0,
                   "repository" : {
                       "delta" : 2762,
                       "size" : 10996
                   },
                   "size" : 8234
               },
               "label" : "[BACKUP-INCR-5]",
               "prior" : "[BACKUP-DIFF-3]",
               "reference" : [
                   "[BACKUP-FULL-2]",
                   "[BACKUP-DIFF-3]"
               ],
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "incr"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 30,
                   "repository" : {
                       "delta" : 2236,
                       "size" : 10431
                   },
                   "size" : 8225
               },
               "label" : "[BACKUP-DIFF-4]",
               "prior" : "[BACKUP-FULL-2]",
               "reference" : [
                   "[BACKUP-FULL-2]"
               ],
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "diff"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 8234,
                   "repository" : {
                       "delta" : 10479,
                       "size" : 10479
                   },
                   "size" : 8234
               },
               "label" : "[BACKUP-FULL-3]",
               "prior" : null,
               "reference" : null,
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "full"
           },
           {
               "archive" : {
                   "start" : null,
                   "stop" : null
               },
               "backrest" : {
                   "format" : 4,
                   "version" : "[VERSION-1]"
               },
               "database" : {
                   "id" : 1
               },
               "info" : {
                   "delta" : 9,
                   "repository" : {
                       "delta" : 2639,
                       "size" : 10873
                   },
                   "size" : 8243
               },
               "label" : "[BACKUP-DIFF-5]",
               "prior" : "[BACKUP-FULL-3]",
               "reference" : [
                   "[BACKUP-FULL-3]"
               ],
               "timestamp" : {
                   "start" : [TIMESTAMP],
                   "stop" : [TIMESTAMP]
               },
               "type" : "diff"
           }
       ],
       "db" : [
           {
               "id" : "1",
               "system-id" : 6156904820763115222,
               "version" : "9.3"
           }
       ],
       "name" : "db",
       "status" : {
           "code" : 0,
           "message" : "ok"
       }
   },
   {
       "backup" : [],
       "db" : [],
       "name" : "db_empty",
       "status" : {
           "code" : 2,
           "message" : "no valid backups"
       }
   }
]
DEBUG:     safe exit called, terminating threads

info bogus
> ../bin/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --stanza=bogus info
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=bogus remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=bogus remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     Info->listStanza: stanza = bogus
stanza bogus
   status: error (missing stanza path)
DEBUG:     safe exit called, terminating threads

info bogus
> ../bin/pg_backrest --config=[TEST_PATH]/db/pg_backrest.conf --stanza=bogus info --output=json
------------------------------------------------------------------------------------------------------------------------------------
DEBUG:     Remote->new(): command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=bogus remote, host = 127.0.0.1, user = [USER-2]
DEBUG:     Protocol->new(): blockSize = 4194304, command = [BACKREST_BIN_PATH]/pg_backrest --no-config --repo-remote-path=[TEST_PATH]/backrest --stanza=bogus remote, compressLevel = 6, compressLevelNetwork = 3, host = 127.0.0.1, isBackend = false, name = remote, user = [USER-2]
DEBUG:     Info->listStanza: stanza = bogus
[
   {
       "backup" : [],
       "db" : [],
       "name" : "bogus",
       "status" : {
           "code" : 1,
           "message" : "missing stanza path"
       }
   }
]
DEBUG:     safe exit called, terminating threads
